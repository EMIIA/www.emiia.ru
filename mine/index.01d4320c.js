(function(e){function t(t){for(var c,a,i=t[0],l=t[1],u=t[2],b=0,d=[];b<i.length;b++)a=i[b],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(e[c]=l[c]);s&&s(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(c=!1)}c&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var c={},o={index:0},r=[];function a(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=c,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"01c1":function(e,t,n){"use strict";n("1192")},"03fd":function(e,t,n){},"086c":function(e,t,n){"use strict";n("0e83")},"0e83":function(e,t,n){},1192:function(e,t,n){},"46fe":function(e,t,n){"use strict";n("62c5")},6151:function(e,t,n){},"62c5":function(e,t,n){},"888e":function(e,t,n){"use strict";n("97e2")},"97e2":function(e,t,n){},b431:function(e,t,n){"use strict";n("c93e")},b7e3:function(e,t,n){},c93e:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c,o,r,a=n("7a23"),i=n("be92"),l=n("3835"),u=n("b85c"),s=(n("d81d"),n("fb6a"),n("d3b7"),n("a9e3"),n("0481"),n("4069"),n("4de4"),9),b=10,d=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];(function(e){e[e["DEFAULT"]=0]="DEFAULT",e[e["PLAY"]=1]="PLAY",e[e["WIN"]=2]="WIN",e[e["LOSE"]=3]="LOSE"})(c||(c={})),function(e){e["DARK"]="dark",e["LIGHT"]="light"}(o||(o={})),function(e){e["WIN"]="Congratulations! You win ðŸŽ‰!",e["LOSE"]="Oops, you stepped on a mine ðŸ¤•!"}(r||(r={}));n("ac1f"),n("00b4");function f(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),c=[e[n],e[t]];e[t]=c[0],e[n]=c[1]}return e}function O(e,t,n,c){return e+n>=0&&t+c>=0&&e+n<s&&t+c<s}function j(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"mobile":"desktop"}function m(){var e=window.navigator.userAgent,t=window.navigator.platform,n=["Macintosh","MacIntel","MacPPC","Mac68K"],c=["Win32","Win64","Windows","WinCE"],o=["iPhone","iPad","iPod"],r="";return-1!==n.indexOf(t)?r="Mac OS":-1!==o.indexOf(t)?r="iOS":-1!==c.indexOf(t)?r="Windows":/Android/.test(e)?r="Android":!r&&/Linux/.test(t)&&(r="Linux"),r}var v=n("ad75"),p=n.n(v),h=function(){return{userDevice:"",userOS:"",board:[],startFirstStep:!1,gameStatus:c.DEFAULT}},g=Object(i["b"])("game",{state:h,actions:{checkDeviceInfo:function(){this.userDevice=j(),this.userOS=m()},initBoard:function(){for(var e=f(Array.apply([],Array(s*s)).map((function(e,t){return{isMine:!!(t<b),isFlagged:!1,isRevealed:!1,count:0}}))),t=0;t<s;t++)this.board[t]=e.slice(t*s,(t+1)*s)},handleReset:function(){this.startFirstStep=!1,this.updateGameStatus(c.DEFAULT),this.initBoard();var e=y();e.currentToast&&e.removeToast()},handleStart:function(){this.gameStatus===c.DEFAULT&&this.updateGameStatus(c.PLAY)},handleCellClick:function(e,t){if(this.handleStart(),this.gameStatus===c.PLAY){var n=this.board[e][t],o=n.isFlagged,r=n.isRevealed;o||r||(this.checkFirstStep(e,t),this.board[e][t].isMine?this.updateGameStatus(c.LOSE):this.revealCell(e,t))}},revealCell:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=new p.a([{row:e,col:t}]);while(c.length){var o=c.shift(),r=n&&o.row===e&&o.col===t;if(!this.board[o.row][o.col].isRevealed||r){this.board[o.row][o.col].isRevealed=!0;var a,i=[],s=Object(u["a"])(d);try{for(s.s();!(a=s.n()).done;){var b=Object(l["a"])(a.value,2),f=b[0],j=b[1];if(O(o.row,o.col,f,j)){var m=this.board[o.row+f][o.col+j],v=m.isMine,h=m.isFlagged,g=m.isRevealed;r||(this.board[o.row][o.col].count+=Number(v)),g||h||v||i.push({row:o.row+f,col:o.col+j})}}}catch(k){s.e(k)}finally{s.f()}this.board[o.row][o.col].count&&!r||i.forEach((function(e){return c.push(e)}))}}this.checkWinStatus()},checkFirstStep:function(e,t){if(!this.startFirstStep&&(this.startFirstStep=!0,this.board[e][t].isMine))for(var n=0;n<this.flatBoard.length;n++)if(!this.flatBoard[n].isMine){var c=Math.floor(n/s),o=n%s;this.board[e][t].isMine=!1,this.board[c][o].isMine=!0;break}},handleCellFlag:function(e,t){this.handleStart(),this.gameStatus===c.PLAY&&(this.board[e][t].isRevealed||(this.board[e][t].isFlagged=!this.board[e][t].isFlagged,this.checkWinStatus()))},checkWinStatus:function(){if(this.gameStatus===c.PLAY&&0===this.remainMines){var e,t=Object(u["a"])(this.flatBoard);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!n.isRevealed&&!n.isFlagged)return;if(n.isMine&&!n.isFlagged)return}}catch(o){t.e(o)}finally{t.f()}this.updateGameStatus(c.WIN)}},expandFromCell:function(e,t){if(this.gameStatus===c.PLAY){var n=this.board[e][t],o=n.isRevealed,r=n.count;if(o&&r){var a,i=0,s=!1,b=Object(u["a"])(d);try{for(b.s();!(a=b.n()).done;){var f=Object(l["a"])(a.value,2),j=f[0],m=f[1];if(O(e,t,j,m)){var v=this.board[e+j][t+m],p=v.isFlagged,h=v.isMine;i+=Number(p),p&&!h&&(s=!0)}}}catch(g){b.e(g)}finally{b.f()}i===r&&(s?this.updateGameStatus(c.LOSE):this.revealCell(e,t,!0))}}},updateGameStatus:function(e){this.gameStatus=e;var t=y(),n=t.addToast;switch(e){case c.WIN:n(r.WIN);break;case c.LOSE:n(r.LOSE);break;default:break}}},getters:{flatBoard:function(e){return e.board.flat()},remainMines:function(){return b-this.flatBoard.filter((function(e){return e.isFlagged})).length},isMobile:function(e){return"mobile"===e.userDevice},isIOS:function(e){return"iOS"===e.userOS}}}),k=function(){return{theme:o.LIGHT,currentToast:null}},y=Object(i["b"])("general",{state:k,actions:{setThemeAttr:function(){document.body.setAttribute("data-theme",this.theme)},toggleTheme:function(){this.theme===o.DARK?this.theme=o.LIGHT:this.theme=o.DARK,this.setThemeAttr()},addToast:function(e){this.currentToast=e},removeToast:function(){this.currentToast=null}}}),B={key:0,class:"toast-wrapper"},S=Object(a["defineComponent"])({setup:function(e){var t=y(),n=y(),c=n.removeToast,o=Object(i["c"])(t),r=o.currentToast,l=Object(a["ref"])(null),u=function(){clearInterval(l.value)},s=function(){u(),c()};return Object(a["watch"])((function(){return r.value}),(function(e){e&&(u(),l.value=setTimeout((function(){s()}),5e3))})),Object(a["onUnmounted"])((function(){u()})),function(e,t){var n=Object(a["resolveComponent"])("ion-icon");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Transition"],{name:"fadein-top"},{default:Object(a["withCtx"])((function(){return[Object(a["unref"])(r)?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",B,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(Object(a["unref"])(r))+" ",1),Object(a["createElementVNode"])("button",{class:"btn--close",onClick:s},[Object(a["createVNode"])(n,{name:"close"})])])):Object(a["createCommentVNode"])("",!0)]})),_:1})}}});n("01c1");const N=S;var E=N,C={class:"board-wrapper"},V={class:"board-list"},w=["data-count","onClick","onContextmenu","onDblclick","onTouchstart"],T={key:0},F={key:1},M=Object(a["defineComponent"])({setup:function(e){var t=g(),n=Object(i["c"])(t),o=n.board,r=n.gameStatus,l=n.isMobile,u=n.isIOS,s=Object(a["computed"])((function(){return r.value===c.LOSE})),b=function(e,n,c){e.preventDefault(),t.handleCellFlag(n,c)},d=function(e,n){l.value||t.expandFromCell(e,n)},f=Object(a["ref"])(null),O=Object(a["ref"])(!1),j=function(){clearInterval(f.value)},m=function(e,n,c){u.value&&l.value&&(j(),e.touches.length>1||(O.value=!1,f.value=setTimeout((function(){t.handleCellFlag(n,c),O.value=!0,j()}),500),o.value[n][c].isFlagged&&e.preventDefault()))},v=function(e){u.value&&l.value&&(O.value?(e.preventDefault(),O.value=!1):j())};return function(e,n){var c=Object(a["resolveComponent"])("ion-icon");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",C,[Object(a["createElementVNode"])("div",V,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object(a["unref"])(o),(function(e,n){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"board-list__row",key:"row_".concat(n)},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e,(function(e,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:"cell_".concat(o),class:Object(a["normalizeClass"])(["board-list__cell",{"board-list__cell--clickable":!Object(a["unref"])(s)&&!e.isRevealed&&!e.isFlagged,"board-list__cell--revealed":e.isRevealed||Object(a["unref"])(s)&&e.isMine,"board-list__cell--error":Object(a["unref"])(s)&&e.isFlagged&&!e.isMine}]),"data-count":e.count||null,onClick:function(e){return Object(a["unref"])(t).handleCellClick(n,o)},onContextmenu:function(e){return b(e,n,o)},onDblclick:function(e){return d(n,o)},onTouchstart:function(e){return m(e,n,o)},onTouchend:v},[Object(a["unref"])(s)?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",T,[e.isMine?(Object(a["openBlock"])(),Object(a["createBlock"])(c,{key:0,name:"skull"})):e.isFlagged?(Object(a["openBlock"])(),Object(a["createBlock"])(c,{key:1,name:"flag"})):e.count?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:2},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.count),1)],64)):Object(a["createCommentVNode"])("",!0)])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",F,[e.isRevealed?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.count||""),1)],64)):e.isFlagged?(Object(a["openBlock"])(),Object(a["createBlock"])(c,{key:1,name:"flag"})):Object(a["createCommentVNode"])("",!0)]))],42,w)})),128))])})),128))]),Object(a["createVNode"])(E)])}}});n("46fe");const A=M;var L=A,_={class:"info-wrapper"},x={class:"info__item"},D={class:"title"},P=Object(a["createTextVNode"])("time"),R={class:"content"},I={class:"info__item"},W={class:"title"},Y=Object(a["createTextVNode"])("mines"),G={class:"content"},U=["disabled"],K=Object(a["createTextVNode"])("reset "),H=Object(a["defineComponent"])({setup:function(e){var t=g(),n=Object(i["c"])(t),o=n.remainMines,r=n.gameStatus,l=Object(a["ref"])(null),u=Object(a["ref"])(0),s=function(){clearInterval(l.value)};return Object(a["watch"])((function(){return r.value}),(function(e){e===c.DEFAULT?u.value=0:e===c.PLAY?(s(),l.value=setInterval((function(){u.value++}),1e3)):s()})),Object(a["onUnmounted"])((function(){s()})),function(e,n){var i=Object(a["resolveComponent"])("ion-icon");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",_,[Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("div",D,[Object(a["createVNode"])(i,{name:"time-outline"}),P]),Object(a["createElementVNode"])("div",R,Object(a["toDisplayString"])(u.value),1)]),Object(a["createElementVNode"])("div",I,[Object(a["createElementVNode"])("div",W,[Object(a["createVNode"])(i,{name:"fitness-outline"}),Y]),Object(a["createElementVNode"])("div",G,Object(a["toDisplayString"])(Object(a["unref"])(o)),1)]),Object(a["createElementVNode"])("button",{class:"info__item btn--reset",disabled:Object(a["unref"])(r)===Object(a["unref"])(c).DEFAULT||Object(a["unref"])(r)===Object(a["unref"])(c).PLAY,onClick:n[0]||(n[0]=function(){var e;return Object(a["unref"])(t).handleReset&&(e=Object(a["unref"])(t)).handleReset.apply(e,arguments)})},[Object(a["createVNode"])(i,{name:"game-controller"}),K],8,U)])}}});n("b431");const z=H;var J=z,q={class:"theme-btn-wrapper"},$=Object(a["createElementVNode"])("div",{class:"dot"},null,-1),Q=Object(a["defineComponent"])({setup:function(e){var t=y(),n=y(),c=n.toggleTheme,r=Object(i["c"])(t),l=r.theme;return function(e,t){var n=Object(a["resolveComponent"])("ion-icon");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",q,[Object(a["createElementVNode"])("button",{class:Object(a["normalizeClass"])(["btn--theme",{dark:Object(a["unref"])(l)===Object(a["unref"])(o).DARK}]),onClick:t[0]||(t[0]=function(){return Object(a["unref"])(c)&&Object(a["unref"])(c).apply(void 0,arguments)})},[$,Object(a["createVNode"])(n,{name:"sunny"}),Object(a["createVNode"])(n,{name:"moon"})],2)])}}});n("eeec");const X=Q;var Z=X,ee={key:0,class:"rule-wrapper"},te={key:0},ne=Object(a["defineComponent"])({props:{isOpen:{type:Boolean,default:!1}},setup:function(e){var t=e,n=g(),c=Object(i["c"])(n),o=c.isMobile,r=Object(a["computed"])((function(){return{icon:o.value?"phone-portrait-outline":"laptop-outline",device:o.value?"mobile":"computer",list:[{kbd:o.value?"click":"left-click",text:"to reveal a grid",display:!0},{kbd:o.value?"long press":"right-click",text:"to add/remove a flag",display:!0},{kbd:"double-click",text:"on an opened grid to reveal non-flagged adjacent grids if the number on the grid equal to the number of adjacent flagged cells",display:!o.value}]}}));return function(e,n){var c=Object(a["resolveComponent"])("ion-icon");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Transition"],{name:"fadein"},{default:Object(a["withCtx"])((function(){return[t.isOpen?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ee,[Object(a["createElementVNode"])("h3",null,[Object(a["createVNode"])(c,{name:Object(a["unref"])(r).icon},null,8,["name"]),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(Object(a["unref"])(r).device)+" device ",1)]),Object(a["createElementVNode"])("ol",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(Object(a["unref"])(r).list,(function(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:t},[e.display?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",te,[Object(a["createElementVNode"])("kbd",null,Object(a["toDisplayString"])(e.kbd),1),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.text),1)])):Object(a["createCommentVNode"])("",!0)],64)})),128))]),Object(a["createElementVNode"])("button",{class:"btn--close",onClick:n[0]||(n[0]=function(t){return e.$emit("closeRule")})},[Object(a["createVNode"])(c,{name:"close"})])])):Object(a["createCommentVNode"])("",!0)]})),_:1})}}});n("e3f8");const ce=ne;var oe=ce,re={class:"navbar"},ae={class:"rule-btn-wrapper"},ie={href:"https://github.com/EMIIA",target:"_blank",class:"navbar__btn"},le=Object(a["defineComponent"])({setup:function(e){var t=g(),n=Object(a["ref"])(!1);return Object(a["watch"])((function(){return t.isMobile}),(function(e){e&&(n.value=!0)}),{immediate:!0}),function(e,t){var c=Object(a["resolveComponent"])("ion-icon");return Object(a["openBlock"])(),Object(a["createElementBlock"])("nav",re,[Object(a["createElementVNode"])("div",ae,[Object(a["createElementVNode"])("button",{class:"navbar__btn btn--rule",onClick:t[0]||(t[0]=function(e){return n.value=!n.value})},[Object(a["createVNode"])(c,{name:"information-circle-outline"})]),Object(a["createVNode"])(oe,{"is-open":n.value,onCloseRule:t[1]||(t[1]=function(e){return n.value=!1})},null,8,["is-open"])]),Object(a["createElementVNode"])("a",ie,[Object(a["createVNode"])(c,{name:"logo-github"})]),Object(a["createVNode"])(Z)])}}});n("086c");const ue=le;var se=ue,be={class:"main"},de=Object(a["defineComponent"])({setup:function(e){var t=g(),n=t.initBoard,c=t.checkDeviceInfo,o=y(),r=o.setThemeAttr;return Object(a["onMounted"])((function(){r(),c(),n()})),function(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",be,[Object(a["createVNode"])(se),Object(a["createVNode"])(J),Object(a["createVNode"])(L)])}}});n("888e");const fe=de;var Oe=fe;n("b7e3");Object(a["createApp"])(Oe).use(Object(i["a"])()).mount("#app")},e3f8:function(e,t,n){"use strict";n("03fd")},eeec:function(e,t,n){"use strict";n("6151")}});
//# sourceMappingURL=index.01d4320c.js.map
