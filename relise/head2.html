<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>Display buildings in 3D</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.js"></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.css' rel='stylesheet' />
<style>
body { margin:0; padding:0; }
#map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
 
<div id='map'></div>
	<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiYWxhbnRnZW8tcHJlc2FsZXMiLCJhIjoiY2pxcmZ1cW1mMG1tcDN4bDVvYzA4MWg5MyJ9.7QtVj_0ythHwEg1n_zaRTQ';
	var map = new mapboxgl.Map({
		style: 'mapbox://styles/mapbox/light-v10',
		center: [-74.0066, 40.7135],
		zoom: 15.5,
		pitch: 60,
		bearing: 140,
		container: 'map',
		antialias: true
	});
	 
	map.on('load', function() {
		
		extrusion_opaque = {
			'id': 'extrusion-opaque',
			'type': 'fill-extrusion',
			'source': {
				'type': 'geojson',
				'data': {
					"features": [
						{
						  "type": "Feature",
						  "properties": {
							"height": 300,
							"base_height": 0,
							"color": "orange"
						  },
						  "geometry": {
							"coordinates": [
							  [
								[ -74.003844, 40.713657, ],
								[ -74.004844, 40.713657, ],
								[ -74.004844, 40.712657, ],
								[ -74.003844, 40.712657, ],
								[ -74.003844, 40.713657, ],
							  ]
							],
							"type": "Polygon"
						  }
						}
					],
					"type": "FeatureCollection"
				}
			},
			'paint': {
				'fill-extrusion-color': ['get', 'color'],
				'fill-extrusion-height': ['get', 'height'],
				'fill-extrusion-base': ['get', 'base_height'],
				'fill-extrusion-opacity': 1.0
			}
		};
		
		extrusion_translucent = {
			'id': 'extrusion-translucent',
			'type': 'fill-extrusion',
			'source': {
				'type': 'geojson',
				'data': {
					"features": [
						{
						  "type": "Feature",
						  "properties": {
							"height": 300,
							"base_height": 0,
							"color": "blue"
						  },
						  "geometry": {
							"coordinates": [
							  [
								[ -74.005844, 40.715657, ],
								[ -74.006844, 40.715657, ],
								[ -74.006844, 40.714657, ],
								[ -74.005844, 40.714657, ],
								[ -74.005844, 40.715657, ],
							  ]
							],
							"type": "Polygon"
						  }
						}
					],
					"type": "FeatureCollection"
				}
			},
			'paint': {
				'fill-extrusion-color': ['get', 'color'],
				'fill-extrusion-height': ['get', 'height'],
				'fill-extrusion-base': ['get', 'base_height'],
				'fill-extrusion-opacity': 0.5
			}
		};
		
		map.addLayer(extrusion_opaque);
		map.addLayer(extrusion_translucent);
		
		console.log(mapboxgl);
	});

</script>
 
</body>
</html>
